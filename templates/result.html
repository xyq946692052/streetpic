<!DOCTYPE html>
<html lang="en">
{% load thumbnail %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no" />
    <title>海报生成器</title>
    <link rel="stylesheet" href="/static/css/weui.min.css">
    <link rel="stylesheet" href="/static/css/jquery-weui.min.css">

    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/jquery-weui.min.js"></script>
    <script src="/static/js/html2canvas.js"></script>

<style>
       #link-div{
           width:480px;
           margin:0px 1px;
           z-index:10;
           height:90px;
           padding-top:10px;
           padding-right:10px;
           position:absolute;
           bottom: 360px;
        }
        #code-div{   
           width:780px;
           margin:0px 1px;
           z-index:10;
           height:260px;
           padding-top:10px;
           position:absolute;
           bottom:20px;
           background-color:#F5F5F5;
           opacity:0.87;
           filter:alpha(opacity=67);
           color: #696969;
        } 
</style>
<script>


window.onload = function(){
     $("#img").css("display", "block");
    //要转换为图片的dom对象
    var element = document.querySelector('#haibao');
    //要显示图片的img标签
    var image = document.querySelector('#img');
    //调用html2image方法
    html2image(element,image);


    function html2image(source,image) {
        html2canvas(source).then(function(canvas) {
            var imageData = canvas.toDataURL(1);
            image.src = imageData;
         });
    }
    $("#haibao").css("display", "none");

     $("#gener-pic").css("background-color", "#009933");
     $("#reback").css("background-color", "#fff");
}

</script>

</head>
<body style="background-color: #FAFAFA;">


<div style="padding-top:8%; width:85%; letter-spacing:4px;margin: 0 auto;">

    <div class="weui-flex" >
        <div style="margin: 0 auto;"><span style="color:#696969; font-size:5.2em;font-weight:bold;">地摊海报</span></div>
    </div>

    <hr style="background:#F5F5F5;height: 10px;border:none; margin-top:2px;"/><br>

    <div class="weui-flex" style="padding-top:1%; text-align:center;">
        <div class="weui-flex__item" style="height:100px; width:400px;"><a href="/" id="reback" class="weui-btn weui-btn_default" style="height:100px; width:400px; font-size:2.5em;background-color:#009933" >重新生成</a></div>
    </div>

    <div style="margin:2% auto;padding:3%;">
             <img id="img" class="img" width="800px;" height="1000px" style="display:none;"/>
    </div>
    <div id="haibao" style="background-color: {{background}};color:#fff; width:800px;height:1000px;position:relative; margin:1px auto; padding:2%;">
        <div class="panel-body">
            <div >
                 <div class="title-div" style="padding:1.5%" >
                     <span style="line-height:1.4;font-size:5.8em;font-weight:bold;">{{ title }}</span>
                 </div>

                 {% if link_url %}
                    <div id="link-div">
                        <div style="font-size:2.4em; color:#D3D3D3; width:750px;">{{link_url}}</div>
                    </div>
                 {% endif %}

                 <div id="code-div">
                     <div style="float:left; margin-left:5px;">
                                <img src="{{qrcode}}" alt="" width="250px" height="250px"/>
                         &nbsp;&nbsp;
                     </div>
                     <div style="margin-left:1%;width:795px;">
                         <span style="font-size: 3.2em; font-weight:bold;">{{prompt}}</span>
                     </div>
                 </div>
            </div>
        </div>
    </div>

</div>

</body>
</html>